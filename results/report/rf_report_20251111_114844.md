# Random Forest Deforestation Detection
## Comprehensive Report

---

**Generated:** 2025-11-11 11:48:44  
**Project:** á»¨ng dá»¥ng Viá»…n thÃ¡m vÃ  Há»c sÃ¢u trong GiÃ¡m sÃ¡t Biáº¿n Ä‘á»™ng Rá»«ng tá»‰nh CÃ  Mau  
**Student:** Ninh Háº£i ÄÄƒng (MSSV: 21021411)  
**Year:** 2025-2026, Há»c ká»³ I

---

## 1. Data Configuration

### Dataset Overview

| **Parameter** | **Value** |
|---------------|-----------|
| **Total Features** | 27 |
| Sentinel-2 Features | 21 (7 before + 7 after + 7 delta) |
| Sentinel-1 Features | 6 (2 before + 2 after + 2 delta) |
| **Ground Truth Points** | 10,463 |
| Class 0 (No Deforestation) | 5,368 (51.3%) |
| Class 1 (Deforestation) | 5,095 (48.7%) |

### Data Split

| **Split** | **Samples** | **Percentage** |
|-----------|-------------|----------------|
| Training | 7,303 | 70% |
| Validation | 1,565 | 15% |
| Test | 1,566 | 15% |
| **Total Valid** | **10,434** | **100%** |

### Study Area

- **Location:** CÃ  Mau Province, Vietnam
- **Spatial Reference:** EPSG:32648 (WGS 84 / UTM zone 48N)
- **Resolution:** 10m
- **Dimensions:** 12,547 Ã— 10,917 pixels
- **Valid Pixels:** 15,569,516 (11.37%)

---

## 2. Model Configuration

### Algorithm

**Random Forest Classifier** - Ensemble learning method using multiple decision trees

### Hyperparameters

| **Parameter** | **Value** | **Description** |
|---------------|-----------|-----------------|
| `n_estimators` | 100 | Number of trees in the forest |
| `max_features` | sqrt (~5) | Max features considered per split |
| `max_depth` | None | Unlimited tree depth |
| `min_samples_split` | 2 | Min samples to split a node |
| `min_samples_leaf` | 1 | Min samples in a leaf node |
| `bootstrap` | True | Use bootstrap samples |
| `class_weight` | balanced | Auto-adjust weights for class imbalance |
| `oob_score` | True | Out-of-bag score estimation |
| `random_state` | 42 | Reproducibility seed |

### Training Configuration

- **Cross Validation:** 5-Fold
- **Stratified Sampling:** Yes (maintains class distribution)

---

## 3. Model Performance

### 3.1 Validation Set Results

**Samples:** 1,565

| **Metric** | **Score** | **Percentage** |
|------------|-----------|----------------|
| **Accuracy** | 0.9853 | **98.53%** |
| Precision | 0.9843 | 98.43% |
| Recall | 0.9855 | 98.55% |
| F1-Score | 0.9849 | 98.49% |
| ROC-AUC | 0.9986 | 99.86% |

**Confusion Matrix:**

|  | **Predicted: No Loss** | **Predicted: Deforestation** |
|--|------------------------|------------------------------|
| **Actual: No Loss** | 792 (TN) | 12 (FP) |
| **Actual: Deforestation** | 11 (FN) | 750 (TP) |

### 3.2 Test Set Results

**Samples:** 1,566

| **Metric** | **Score** | **Percentage** |
|------------|-----------|----------------|
| **Accuracy** | 0.9840 | **98.40%** |
| Precision | 0.9792 | 97.92% |
| Recall | 0.9882 | 98.82% |
| F1-Score | 0.9837 | 98.37% |
| ROC-AUC | 0.9980 | 99.80% |

**Confusion Matrix:**

|  | **Predicted: No Loss** | **Predicted: Deforestation** |
|--|------------------------|------------------------------|
| **Actual: No Loss** | 788 (TN) | 16 (FP) |
| **Actual: Deforestation** | 9 (FN) | 753 (TP) |

### 3.3 Out-of-Bag Score

- **OOB Score:** 0.9855 (98.55%)

### 3.4 Cross-Validation Results (5-Fold)

| **Metric** | **Mean Â± Std** | **Min** | **Max** |
|------------|----------------|---------|---------|
| Accuracy | 0.9851 Â± 0.0039 | 0.9802 | 0.9897 |
| Precision | 0.9813 Â± 0.0082 | 0.9671 | 0.9901 |
| Recall | 0.9882 Â± 0.0042 | 0.9803 | 0.9930 |
| F1 | 0.9847 Â± 0.0039 | 0.9798 | 0.9894 |
| Roc_auc | 0.9978 Â± 0.0018 | 0.9941 | 0.9992 |

---

## 4. Feature Importance

### Top 15 Most Important Features

| **Rank** | **Feature** | **Importance (%)** | **Visualization** |
|----------|-------------|--------------------|-------------------|
| 1 | `S2_after_NDVI` | 15.32% | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |
| 2 | `S2_after_B4` | 14.50% | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |
| 3 | `S2_delta_B4` | 13.92% | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |
| 4 | `S2_after_NBR` | 10.25% | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |
| 5 | `S2_delta_NDVI` | 8.79% | â–ˆâ–ˆâ–ˆâ–ˆ |
| 6 | `S2_delta_NBR` | 8.00% | â–ˆâ–ˆâ–ˆâ–ˆ |
| 7 | `S2_delta_NDMI` | 6.94% | â–ˆâ–ˆâ–ˆ |
| 8 | `S2_after_NDMI` | 4.81% | â–ˆâ–ˆ |
| 9 | `S2_delta_B12` | 3.70% | â–ˆ |
| 10 | `S2_after_B11` | 2.20% | â–ˆ |
| 11 | `S2_after_B8` | 1.68% |  |
| 12 | `S2_delta_B11` | 1.67% |  |
| 13 | `S2_after_B12` | 1.32% |  |
| 14 | `S2_before_B11` | 0.98% |  |
| 15 | `S2_before_NBR` | 0.82% |  |

> **Note:** Full feature importance rankings (all 27 features) are saved to: `rf_feature_importance.csv`

---

## 5. Prediction Results

### Overview

| **Category** | **Value** |
|--------------|-----------|
| Total Pixels Processed | 136,975,599 |
| Valid Pixels | 15,569,516 (11.37%) |

### Classification Statistics

| **Class** | **Category** | **Pixels** | **Percentage** | **Area (ha)** |
|-----------|--------------|------------|----------------|---------------|
| 0 | ğŸŒ³ No Deforestation | 10,622,699 | 68.23% | 106,226.99 |
| 1 | ğŸ”¥ Deforestation | 4,946,817 | 31.77% | 49,468.17 |

---

## 6. Output Files

### Directory Structure

```
d:\ninhhaidang\25-26_HKI_DATN_21021411_DangNH\results/
â”œâ”€â”€ rasters/
â”‚   â”œâ”€â”€ rf_classification.tif
â”‚   â””â”€â”€ rf_probability.tif
â”œâ”€â”€ models/
â”‚   â””â”€â”€ rf_model.pkl
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ rf_training_data.csv
â”‚   â”œâ”€â”€ rf_feature_importance.csv
â”‚   â””â”€â”€ rf_evaluation_metrics.json
â”œâ”€â”€ plots/
â”‚   â”œâ”€â”€ rf_confusion_matrices.png
â”‚   â”œâ”€â”€ rf_roc_curve.png
â”‚   â”œâ”€â”€ rf_feature_importance.png
â”‚   â”œâ”€â”€ rf_classification_maps.png
â”‚   â””â”€â”€ rf_cv_scores.png
â””â”€â”€ report/
    â””â”€â”€ rf_report_20251111_114844.md
```

---

## 7. Execution Summary

| **Metric** | **Value** |
|------------|-----------|
| Training Time | 0.01 minutes |
| Pipeline Status | âœ… Successfully completed all steps |
| Features Engineered | 27 |
| Model Type | Random Forest with 100 trees |
| Model Size | N/A MB |

---

## 8. Key Findings

### ğŸ¯ Model Performance

- The Random Forest model achieved **excellent performance** with **98.40% accuracy** on the test set
- **High precision (97.92%)** indicates low false positive rate
- **High recall (98.82%)** indicates effective detection of deforestation
- **Robust performance** confirmed by cross-validation: 98.51% Â± 0.39%

### ğŸŒŸ Most Important Features

1. **S2_after_NDVI** (15.32%)
2. **S2_after_B4** (14.50%)
3. **S2_delta_B4** (13.92%)

> These features are primarily derived from spectral indices (NDVI, NBR) and red band reflectance, which are strongly correlated with vegetation health.

### ğŸ”¥ Deforestation Detection

- **Detected:** 4,946,817 deforestation pixels
- **Area:** 49,468.17 hectares of deforested area
- **Preserved:** 106,226.99 hectares classified as intact forest

### ğŸ’ª Model Robustness

- **Cross-validation accuracy:** 98.51% Â± 0.39%
- **Out-of-Bag Score:** 98.55%
- **Consistent performance** across all evaluation metrics
- **Low variance** in cross-validation results indicates stable predictions

---

## 9. Conclusions

The Random Forest classifier demonstrates **excellent capability** in detecting deforestation in CÃ  Mau Province using multi-temporal Sentinel-1 and Sentinel-2 imagery.

**Strengths:**
- âœ… High accuracy (98.40%) and robust cross-validation results
- âœ… Balanced precision-recall trade-off
- âœ… Effective use of spectral indices and temporal changes
- âœ… Fast training and prediction times

**Recommendations:**
- âœ¨ Deploy model for operational forest monitoring
- ğŸ”„ Update ground truth data periodically for model refinement
- ğŸ“Š Compare with deep learning approaches (CNN) for performance evaluation
- ğŸŒ Extend methodology to other provinces or regions

---

**Report generated by Random Forest Deforestation Detection Pipeline**  
**Contact:** Ninh Háº£i ÄÄƒng (MSSV: 21021411)  
**Generated:** 2025-11-11 11:48:44
